@{
    Layout = "";
}
<!DOCTYPE html>
<html dir="ltr">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" href="../../favicon.png">
    <title>Smart-ASS: Digital Business Card Analytics Software System</title>
    <!-- Custom CSS -->
    <link href="@Url.Content("~/assets/css/style.min.css")" rel="stylesheet">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href="@Url.Content("~/assets/libs/sweetalert2/dist/sweetalert2.min.css")" rel="stylesheet">
    <link href="@Url.Content("~/assets/extra-libs/toastr/dist/build/toastr.min.css")" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-firestore.js"></script>
    <script src="~/assets/js/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />
    <script src="~/assets/js/login.js"></script>
</head>

<body>
    <div class="main-wrapper">
        <!-- ============================================================== -->
        <!-- Preloader - style you can find in spinners.css -->
        <!-- ============================================================== -->
        <div class="preloader">
            <div class="lds-ripple">
                <div class="lds-pos"></div>
                <div class="lds-pos"></div>
            </div>
        </div>
        <!-- ============================================================== -->
        <!-- Preloader - style you can find in spinners.css -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Login box.scss -->
        <!-- ============================================================== -->
        <div class="auth-wrapper d-flex no-block justify-content-center align-items-center" style="background:url(../../assets/images/background/login-register.jpg) no-repeat center center; background-size: cover;">
            <div class="auth-box on-sidebar p-4 bg-white m-0 rounded">
                <div>
                    <div class="logo text-center">
                        <span class="db">
                            <img src="../../assets/images/SmartAss200.png" alt="logo"/>
                        </span>
                    </div>
                    <hr/>
                    <h3 class="box-title mb-0">Register Now</h3><small>Create your account &amp; connect. Have an account?<a href="@Url.Action("Login","Account")" class="text-info ml-1">Sign In</a></small>
                    <!-- Form -->
                    <div class="row">
                        <div class="col-12">
                            <form id="register-form" class="form-horizontal mt-3 form-material" >
                                <div class="form-group mt-3">
                                    <div class="col-xs-12">
                                        <input id="FirstName" name="FirstName" class="form-control" type="text" required data-validation-required-message="This field is required" placeholder="First Name *">
                                    </div>
                                </div>
                                <div class="form-group mt-3">
                                    <div class="col-xs-12">
                                        <input id="LastName" name="LastName" class="form-control" type="text" required data-validation-required-message="This field is required" placeholder="Last Name *">
                                    </div>
                                </div>
                                <div class="form-group mb-3 ">
                                    <div class="col-xs-12">
                                        <input id="Email" name="Email" class="form-control" type="email" required data-validation-required-message="This field is required" placeholder="Email *">
                                    </div>
                                </div>
                                <div class="form-group mb-3 ">
                                    <div class="col-xs-12">
                                        <div class="form-group">
                                            <select class="form-control" id="Gender" name="Gender" title="Gender">
                                                <option value="" disabled selected>Gender</option>
                                                <option value="Male">Male</option>
                                                <option value="Female">Female</option>
                                                <option value="Other">Other</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group mb-3 ">
                                    <div class="col-xs-12">
                                        <input id="Password" name="Password" class="form-control" type="password" required data-validation-required-message="This field is required" placeholder="Password *">
                                    </div>
                                </div>
                                <div class="form-group mb-3">
                                    <div class="col-xs-12">
                                        <input id="ConfirmPassword" name="ConfirmPassword" class="form-control" type="password" data-validation-required-message="This field is required" required placeholder="Confirm Password *">
                                    </div>
                                </div>
                                @*<div class="form-group mb-3">
                                    <div class="col-xs-12">
                                        <input id="AffiliateId" name="AffiliateId" class="form-control" type="text" placeholder="Affiliate ID">
                                    </div>
                                </div>*@
                                <div class="form-group mb-3">
                                    <div class="">
                                        <div class="checkbox checkbox-primary pt-0">
                                            <input id="checkboxsignup" name="checkboxsignup" type="checkbox" required data-validation-required-message="This field is required" class="chk-col-indigo material-inputs">
                                            <label for="checkboxsignup"> I agree to all <a target="_blank" href="https://smartassdigitalbusinesscard.com/terms-and-conditions/">Terms of Services</a> and I agree to the <a href="https://www.smartassdigitalbusinesscard.com/privacy-policy/" target="_blank">Privacy Policy</a></label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group text-center mt-3">
                                    <div class="col-xs-12">
                                        <button class="btn btn-info btn-lg btn-block text-uppercase waves-effect waves-light" type="submit">Sign Up</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- ============================================================== -->
        <!-- Login box.scss -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Page wrapper scss in scaffolding.scss -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Page wrapper scss in scaffolding.scss -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Right Sidebar -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Right Sidebar -->
        <!-- ============================================================== -->
    </div>
    <!-- ============================================================== -->
    <!-- All Required js -->
    <!-- ============================================================== -->
    <script src="@Url.Content("~/assets/libs/jquery/dist/jquery.min.js")"></script>
    <!-- Bootstrap tether Core JavaScript -->
    <script src="@Url.Content("~/assets/libs/popper.js/dist/umd/popper.min.js")"></script>
    <script src="@Url.Content("~/assets/libs/bootstrap/dist/js/bootstrap.min.js")"></script>
    <!-- SweetAlert -->
    <script src="@Url.Content("~/assets/libs/sweetalert2/dist/sweetalert2.all.min.js")"></script>
    <script src="@Url.Content("~/assets/extra-libs/toastr/dist/build/toastr.min.js")"></script>
    <!-- ============================================================== -->
    <!-- This page plugin js -->
    <!-- ============================================================== -->
    <script src="@Url.Content("~/assets/extra-libs/jqbootstrapvalidation/validation.js")"></script>
    <script>
        ! function(window, document, $) {
            "use strict";
            $("input,select,textarea").not("[type=submit]").jqBootstrapValidation();
        }(window, document, jQuery);
    </script>
    <script>
        $('[data-toggle="tooltip "]').tooltip();
        $(".preloader ").fadeOut();
    </script>
    <script>
        $('#register-form').on('submit',
            function(e) {
                e.preventDefault();

                if(this.checkboxsignup.value === "") {
                    alert("Please agree to the terms and conditions!");
                    this.checkboxsignup.focus();
                    return;
                }
                if(this.Gender.value === "") {
                    alert("Please select your Gender");
                    this.Gender.focus();
                    return;
                }
                if(this.Password.value !== "" && this.Password.value === this.ConfirmPassword.value) {
                    if(this.Password.value.length < 8) {
                        alert("Error: Password must contain at least eight characters!");
                        this.Password.focus();
                        return;
                    }
                    if(this.Password.value === this.Email.value) {
                        alert("Error: Password must be different from Email!");
                        this.Password.focus();
                        return;
                    }
                    re = /[0-9]/;
                    if(!re.test(this.Password.value)) {
                        alert("Error: password must contain at least one number (0-9)!");
                        this.Password.focus();
                        return;
                    }
                    re = /[a-z]/;
                    if(!re.test(this.Password.value)) {
                        alert("Error: password must contain at least one lowercase letter (a-z)!");
                        this.Password.focus();
                        return;
                    }
                    re = /[A-Z]/;
                    if(!re.test(this.Password.value)) {
                        alert("Error: password must contain at least one uppercase letter (A-Z)!");
                        this.Password.focus();
                        return;
                    }
                } else {
                    alert("Error: Please check that you've entered and confirmed your password!");
                    this.Password.focus();
                    return;
                }

                firebaseApp.auth().createUserWithEmailAndPassword(this.Email.value, this.Password.value)
                    .then(function(result) {
                        firebaseApp.firestore().collection("user-profile").doc(result.user.uid).set({
                                email: this.Email.value,
                                userId: result.user.uid,
                                firstname: this.FirstName.value,
                                lastname: this.LastName.value,
                                gender: this.Gender.value,
                                package: "Individual",
                            dateCreated: firebaseApp.firestore.FieldValue.serverTimestamp()
                            })
                            .then(function() {
                                console.log("User profile created!");
                                $.ajax({
                                    type: 'POST',
                                    url: "/Account/LoginFromFirebase?uid=" + result.user.uid,
                                    async: false,
                                    cache: false,
                                    processData: false,
                                    contentType: false,
                                    success: (function (data) {
                                        toastr.success("Welcome!");
                                        window.location.href = '/Home/Index';
                                    }),
                                    error: function (request, status, error) {
                                        toastr.log("error " + error);
                                    }
                                });
                            })
                            .catch(function(error) {
                                toastr.error("Error writing document: ", error);
                            });
                    })
                    .catch(function(error) {
                        var errorCode = error.code;
                        var errorMessage = error.message;
                        if (errorCode === 'auth/weak-password') {
                            toastr.error('The password is too weak.');
                        }
                        else if (errorCode === 'auth/email-already-in-use') {
                            toastr.error(errorMessage);
                        }
                        else {
                            toastr.error("Error writing document: ", errorCode + ' - ' + errorMessage);
                        }
                    });
                return;
            });
    </script>
</body>

</html>